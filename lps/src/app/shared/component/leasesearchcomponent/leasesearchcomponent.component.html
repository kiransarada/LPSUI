<div class="mt-4 card text-center" style="height: 81vh;; padding-left: 0; padding-right: 0;">
  <form [formGroup]='columnFilterSearchForm'>
    <div class="card-header">
      <ul class="nav nav-tabs card-header-tabs">
        <li class="nav-item"><a class="nav-link active" id="home-tab" data-toggle="tab" href="#home" role="tab"
            aria-controls="home" aria-selected="true">Search</a></li>
        <li class="nav-item"><a class="nav-link" id="profile-tab" data-toggle="tab" href="#saveFilter" role="tab"
            aria-controls="profile" aria-selected="false">Saved Filters</a></li>
      </ul>
    </div>
    <div class="tab-content">
      <div class="tab-pane fade show active" id="home" role="tabpanel" aria-labelledby="home-tab">
        <br>
        <div>
          <div class="col-sm-2 text-float-right"><i class="fa fa-angle-double-down" aria-hidden="true"
              (click)="filterShow()"></i></div>
          <div class="col-md-12">
            <div class="col-lg-12 col-md-12 row" style="width: 100%; height: 60vh;">
              <div class="col-lg-12 col-md-12 card bg-light text-dark heightOfFilter">
                <div class="card-body column" *ngFor="let header of headers;let j = index;">
                  <div class="chip">
                    {{header}} <span class="closebtn" (click)="removeHeader(header,j)">&times;</span>
                  </div>

                </div>
              </div>
              <div class="col-lg-3 col-md-3 mt-2 card bg-light text-dark">
                <span class="badge badge-pill badge-light custom-badge-pill">Fields
                  List</span>
                <div class="card-body column leaseCols ">
                  <div class="form-group">
                    <div class="form-control heightOfFilter" id="lps-selectFields">
                      <div *ngFor="let column of columnNames;let k=index;">
                        <div (click)="addHeader(column.key,k)">{{column.label}}</div>
                      </div>

                    </div>
                  </div>

                </div>
              </div>
              <div class="col-md-9 col-lg-9 column">
                <div class="col-lg-12 col-md-12 mt-2 card bg-light text-dark" style="height: 55vh;">
                  <span class="badge badge-pill badge-light custom-badge-pill cs-2">Search
                    Filters </span>
                  <div class="" formArrayName="filterSearch"
                    *ngFor="let item of columnFilterSearchForm.get('filterSearch').controls; let i = index;">
                    <div class=" col-md-12" [formGroupName]="i">
                      <div id="grp-lpsFilter1" class=" mt-4 row">
                        <div class="col-md-3  input-group ">

                          <!-- <div class="dropdown">
                              <button onclick="myFunction()" class="dropbtn">Dropdown</button>
                              <div id="myDropdown" class="dropdown-content">
                                <input type="text" placeholder="Search.." id="myInput" formControlName="column" onkeyup="filterFunction()">
                                <a href="#about">About</a>
                                <a href="#base">Base</a>
                                <a href="#blog">Blog</a>
                                <a href="#contact">Contact</a>
                                <a href="#custom">Custom</a>
                                <a href="#support">Support</a>
                                <a href="#tools">Tools</a>
                              </div>
                            </div>  -->
                          <!-- <div class="btn-group" dropdown formControlName="column">
                          <button id="button-basic" dropdownToggle type="button" class="btn btn-primary dropdown-toggle"
                            aria-controls="dropdown-basic" >
                            Button dropdown <span class="caret"></span>
                          </button>
                          <ul id="dropdown-basic" *dropdownMenu class="dropdown-menu" role="menu"
                            aria-labelledby="button-basic">
                            <div class="dropdown-item">
                                <input class="form-control" id="FilterDropdown-lps" (keyup)="filterText()"
                                  type="text" placeholder="Search..">
                            </div>
                              <li class="dropdown-item"*ngFor="let columnName of columnNames" (click)="selectCloumn(columnName)"> {{columnName}}</li>
                          </ul>
                        </div> -->
                          <!-- <input id="typeahead-focus" type="text" class="form-control lps-scroll-dropdown attBtn "
                          formControlName="column" [ngbTypeahead]="columnNames"
                          (focus)="focus$.next($event.target.value)" (click)="click$.next($event.target.value)"
                          #instance="ngbTypeahead" /> -->


                          <select class="form-control lps-scroll-dropdown attBtn" formControlName="column">
                            <option value="" disabled>Select Column</option>
                            <!-- <option value=null> <input class="form-control" id="FilterDropdown-lps" type="text"
                              placeholder="Search.."></option> -->
                            <option [ngValue]="columnName.key" *ngFor="let columnName of columnNames">
                              {{columnName.label}}</option>
                          </select>
                        </div>

                        <div class="col-md-3  input-group ">

                          <select class="form-control lps-scroll-dropdown attBtn" formControlName="condition">
                            <option value="" disabled>Select Condition</option>
                            <option [ngValue]="conditionName" *ngFor="let conditionName of conditionList">
                              {{conditionName}}</option>
                          </select>
                        </div>

                        <div class="col-md-4">
                          <input class="form-control" formControlName="value" type='text' placeholder="Enter Value.."
                            id="lpsFilter1-valueInput">


                        </div>
                        <div class="col-md-2">
                          <button id="btn-lpsFilter1" type="button"
                            class="btn btn-primary btn-sm rounded-circle attBtn plus-btn"
                            [disabled]='!columnFilterSearchForm.valid' (click)="addItem()">
                            <i class="fas fa-plus"></i>
                          </button>
                          <button id="btn-lpsFilter1" type="button"
                            class="btn btn-primary btn-sm rounded-circle attBtn plus-btn" (click)="removeItem(i)">
                            <i class="fas fa-minus"></i>
                          </button>

                        </div>
                      </div>
                    </div>



                  </div>
                  <!-- <div>
                  <button id="btn-lpsFilter1 " type="button"
                    class="btn btn-primary btn-sm rounded-circle attBtn plus-btn float-right" (click)="search()">
                    Search
                  </button>
                </div> -->
                </div>
              </div>

            </div>

            <!-- </form> -->
          </div>
        </div>

        <div class="mt-2 row justify-content-end">
          <div class="col-2">
            <button class="btn attBtn btn-primary" data-toggle="modal" data-target="#saveFilterModal" type="submit"
              [disabled]='(headers.length==0) || (!columnFilterSearchForm.valid && columnFilterSearchForm.value.filterSearch.length>1)'>Save</button>
          </div>
          <div class="col-2">
            <button
              [disabled]='(headers.length==0) || (!columnFilterSearchForm.valid && columnFilterSearchForm.value.filterSearch.length>1)'
              class="btn attBtn btn-primary" type="submit" (click)="search()">Search</button>
          </div>
        </div>

        <div class="col-md-12">
          <div class="col-md-4 float-right">
            Search:
            <input [(ngModel)]="searchText" placeholder="Search.." class="advancedSearchTextbox"
              (click)='globalSearch()'>
          </div>
        </div>
        <div class="col-md-12 col-lg-12" style="width:100rem;overflow: scroll;">
          <div class="near_by_hotel_wrapper">
            <div class="near_by_hotel_container">
              <!-- *ngIf="tableData.length>0" -->
              <table class="table table-striped table-bordered table-bulk" *ngIf="showTable">
                <thead>
                  <!-- <th>S.NO</th> -->
                  <th *ngFor="let data of columns;let i=index" class="text-center">{{data.labelName}}
                    <span *ngIf="data.sort=='asc'"><i class="fas fa-sort-down"
                        (click)="sort('dsc',data.key,i)"></i></span>
                    <span *ngIf="data.sort=='dsc'"><i class="fas fa-sort-up"
                        (click)="sort('asc',data.key,i)"></i></span>
                  </th>
                </thead>
                <tbody>
                  <!-- <tr *ngIf="searchFilters && searchFilters.length">
                    <td *ngFor='let searchFilter of searchFilters'>
                      <input type="text" [(ngModel)]="searchFilter.value" class="form-control"
                        [placeholder]="searchFilter.placeholder" (keyup)="getDataBasedOnColumnSearch()"/>
                      </td>
                  </tr> -->
                  <tr *ngFor='let item of data.data;let i=index'>
                    <!-- <td>{{i}}</td> -->
                    <td *ngFor="let column of columns">
                      <div *ngIf="item[column.key]">{{item[column.key]}}</div>
                      <div *ngIf="!item[column.key]">No Data Present</div>
                    </td>
                  </tr>
                </tbody>
              </table>
           <!-- <div>
             <app-pagination [count]="count" [sendPageNo]="sendPageNo()"></app-pagination>
           </div> -->

            </div>
          </div>


        </div>


      </div>

      <div class="tab-pane fade ls-hideTab" id="saveFilter" role="tabpanel" aria-labelledby="profile-tab">
        <div class="container mt-5">
          <div class="row" *ngFor="let filter of savedFilterList;let k=index;">
            <div class="col-4">
              <div class="card">
                <div class="card-body">{{filter.name}}</div>
              </div>
            </div>
            <div class="col-2 mt-2">
              <button class="btn attBtn btn-primary" (click)="runSaveSearch(filter)">
                <i class="fas fa-play"></i>
                <span>Run</span>
              </button></div>
            <div class="col-2 mt-2">
              <button class="btn attBtn btn-primary" (click)="editSaveSearch(filter)">
                <i class="fas fa-pencil-alt"></i>
                <span>Edit</span>
              </button></div>
            <div class="col-2 mt-2">
              <button class="btn attBtn btn-primary" (click)="deleteSaveSearch(filter)">
                <i class="far fa-trash-alt"></i>
                <span>Delete</span>
              </button></div>
          </div>


          <div class="row mt-5">
            <div class="col-0 mt-5">
              <button class="btn mt-5 attBtn btn-primary" id="lsBackBtn">Back</button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </form>


</div>



<!-- Modal -->
<div class="modal fade" id="saveFilterModal">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Save Filter</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <div>
          <h3>Name of the Save Filter</h3>
          <input type="text" [(ngModel)]="saveFilterName" class="form-control" placeholder="Enter Name"
            [ngModelOptions]="{standalone: true}" />
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn attBtn btn-secondary" data-dismiss="modal">Close</button>
        <button type="button" class="btn attBtn btn-primary" [disabled]='saveFilterName==""'
          (click)="save()">Save</button>
      </div>
    </div>
  </div>
</div>


<div class="modal fade" id="editModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
  aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Alert</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <div>
          <p>This Save Filter name already Exists! Click on 'Yes' to Update on existing</p>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn attBtn btn-secondary" data-dismiss="modal" (click)="Update()">Yes</button>
        <button type="button" class="btn attBtn btn-primary" [disabled]='saveFilterName==""'
          (click)="save()">No</button>
      </div>
    </div>
  </div>
</div>




<!-- <app-d-table [labels]="columns" [tableData]="data" [searchFilters]="searchFilters" (keyup)="onKeyPress($event)"></app-d-table> -->
<!-- <ng-table [config]="config" (tableChanged)="onChangeTable(config,$event)" (cellClicked)="onCellClick($event)"
          [rows]="data" [columns]="columns" [ngTableFiltering]="">
        </ng-table> -->